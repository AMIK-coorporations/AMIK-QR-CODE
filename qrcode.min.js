// Simple QR Code generator fallback
// This provides basic QR code functionality using a clean API service
window.QRCode = {
    toCanvas: function(canvas, text, options, callback) {
        if (typeof options === 'function') {
            callback = options;
            options = {};
        }
        
        options = options || {};
        const size = options.width || 300;
        
        // Create image element instead of drawing to canvas
        const img = new Image();
        img.crossOrigin = 'anonymous';
        
        // Use QR API service to generate QR code
        const encodedText = encodeURIComponent(text);
        img.src = `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodedText}&format=png&margin=10`;
        
        img.onload = function() {
            // Draw image to canvas
            const ctx = canvas.getContext('2d');
            canvas.width = size;
            canvas.height = size;
            
            // Fill with white background
            ctx.fillStyle = options.color && options.color.light ? options.color.light : '#FFFFFF';
            ctx.fillRect(0, 0, size, size);
            
            // Draw QR code image
            ctx.drawImage(img, 0, 0, size, size);
            
            if (callback) callback(null);
        };
        
        img.onerror = function() {
            if (callback) callback(new Error('Failed to generate QR code'));
        };
    }
};

console.log('QR Code library loaded (local implementation)');